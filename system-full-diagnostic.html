// ==================== ÙØ­Øµ Ø´Ø§Ù…Ù„ ÙÙŠ Console ====================
console.clear();
console.log('%cğŸ” ÙØ­Øµ Ø´Ø§Ù…Ù„ Ù„Ù„Ù†Ø¸Ø§Ù… ğŸ‡ªğŸ‡¬', 'color: #3b82f6; font-size: 24px; font-weight: bold; text-shadow: 2px 2px 4px rgba(0,0,0,0.2);');
console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
console.log('ğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ®:', new Date().toLocaleString('ar-EG', { timeZone: 'Africa/Cairo' }));
console.log('ğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ahmedrashadmoahmed-lang');
console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n');

// ==================== 1. ÙØ­Øµ Ø§Ù„ÙˆØ­Ø¯Ø§Øª ====================
console.log('%cğŸ“¦ ÙØ­Øµ Ø§Ù„ÙˆØ­Ø¯Ø§Øª JavaScript', 'color: #8b5cf6; font-size: 18px; font-weight: bold;');
console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€');

const modules = [
    { name: 'APP_CORE', critical: true },
    { name: 'APP_AUTH', critical: true },
    { name: 'APP_PAGES', critical: true },
    { name: 'APP_SETTINGS', critical: true },
    { name: 'APP_REAL_DATA', critical: true },
    { name: 'APP_HELPERS', critical: false },
    { name: 'APP_SALES', critical: false },
    { name: 'APP_WORKFLOW', critical: false },
    { name: 'APP_ACCOUNTING', critical: false },
    { name: 'APP_MODALS', critical: false },
    { name: 'APP_PRINT', critical: false },
    { name: 'APP_CHARTS', critical: false },
    { name: 'APP_NOTIFICATIONS', critical: false },
    { name: 'APP_REAL_DATA_EXTENDED', critical: false },
    { name: 'APP_DASHBOARD_ENHANCED', critical: false },
    { name: 'APP_PAGES_COMPLETE', critical: false },
    { name: 'APP_PAGES_FINAL', critical: false }
];

let loaded = 0;
let errors = 0;
let warnings = 0;

modules.forEach(mod => {
    const exists = typeof window[mod.name] !== 'undefined';
    if (exists) {
        console.log(`  âœ… ${mod.name}`);
        loaded++;
    } else {
        if (mod.critical) {
            console.error(`  âŒ ${mod.name} (Ø­Ø±Ø¬)`);
            errors++;
        } else {
            console.warn(`  âš ï¸ ${mod.name}`);
            warnings++;
        }
    }
});

console.log(`\nğŸ“Š Ø§Ù„Ù†ØªÙŠØ¬Ø©: ${loaded}/${modules.length} Ù…Ø­Ù…Ù‘Ù„ (${((loaded/modules.length)*100).toFixed(1)}%)`);
console.log(`ğŸ”´ Ø£Ø®Ø·Ø§Ø¡ Ø­Ø±Ø¬Ø©: ${errors}`);
console.log(`ğŸŸ¡ ØªØ­Ø°ÙŠØ±Ø§Øª: ${warnings}\n`);

// ==================== 2. ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ====================
console.log('%cğŸ’¾ ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'color: #10b981; font-size: 18px; font-weight: bold;');
console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€');

if (typeof APP_CORE !== 'undefined') {
    const dataKeys = ['customers', 'quotations', 'invoices', 'products', 'suppliers', 'settings'];
    const dataReport = {};
    
    dataKeys.forEach(key => {
        const data = APP_CORE.getData(key);
        const count = Array.isArray(data) ? data.length : (data ? 'Ù…ÙˆØ¬ÙˆØ¯' : 'ÙØ§Ø±Øº');
        dataReport[key] = count;
        console.log(`  ${data ? 'âœ…' : 'âš ï¸'} ${key}: ${count}`);
    });
    
    console.log('\nğŸ“ˆ Ù…Ù„Ø®Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:');
    console.table(dataReport);
} else {
    console.error('  âŒ APP_CORE ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ - Ù„Ø§ ÙŠÙ…ÙƒÙ† ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
}

// ==================== 3. ÙØ­Øµ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ====================
console.log('\n%cğŸ‘¤ ÙØ­Øµ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ', 'color: #f59e0b; font-size: 18px; font-weight: bold;');
console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€');

if (typeof APP_CORE !== 'undefined' && APP_CORE.appState?.currentUser) {
    const user = APP_CORE.appState.currentUser;
    console.log('  âœ… Ù…Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„');
    console.log('  ğŸ‘¤ Ø§Ù„Ø§Ø³Ù…:', user.name);
    console.log('  ğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯:', user.email);
    console.log('  ğŸ­ Ø§Ù„Ø¯ÙˆØ±:', user.role);
    console.log('  ğŸ¢ Ø§Ù„Ù‚Ø³Ù…:', user.department || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯');
    console.log('\nğŸ‘¤ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„ÙƒØ§Ù…Ù„Ø©:');
    console.table(user);
} else {
    console.warn('  â³ Ù„Ù… ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø¹Ø¯');
}

// ==================== 4. ÙØ­Øµ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ====================
console.log('\n%câš™ï¸ ÙØ­Øµ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ØµØ±ÙŠØ©', 'color: #ec4899; font-size: 18px; font-weight: bold;');
console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€');

if (typeof APP_SETTINGS !== 'undefined') {
    const settings = APP_SETTINGS.getSettings();
    console.log('  âœ… Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø­Ù…Ù„Ø©');
    console.log('  ğŸ’° Ø§Ù„Ø¹Ù…Ù„Ø©:', settings.financial?.currency || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯');
    console.log('  ğŸ’± Ø³Ø¹Ø± Ø§Ù„ØµØ±Ù:', settings.financial?.exchangeRate || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯');
    console.log('  ğŸ“Š Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©:', settings.financial?.taxRate + '%' || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯');
    console.log('  ğŸ¢ Ø§Ù„Ø´Ø±ÙƒØ©:', settings.company?.name || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯');
    console.log('\nâš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙƒØ§Ù…Ù„Ø©:');
    console.log(settings);
} else {
    console.error('  âŒ APP_SETTINGS ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');
}

// ==================== 5. Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© ====================
console.log('\n%cğŸ’° Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©', 'color: #14b8a6; font-size: 18px; font-weight: bold;');
console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€');

if (typeof APP_REAL_DATA !== 'undefined') {
    const stats = APP_REAL_DATA.calculateRealStatistics();
    console.log('  âœ… Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù…Ø­Ø³ÙˆØ¨Ø©');
    console.log('  ğŸ“Š Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª:', stats.totalRevenue?.toLocaleString('ar-EG') + ' Ø¬.Ù…');
    console.log('  ğŸ’¸ Ø§Ù„ØªÙƒÙ„ÙØ©:', stats.totalCost?.toLocaleString('ar-EG') + ' Ø¬.Ù…');
    console.log('  ğŸ’š ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­:', stats.netProfit?.toLocaleString('ar-EG') + ' Ø¬.Ù…');
    console.log('  ğŸ“ˆ Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­:', stats.profitMargin?.toFixed(2) + '%');
    console.log('\nğŸ’° Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙƒØ§Ù…Ù„Ø©:');
    console.table(stats);
} else {
    console.error('  âŒ APP_REAL_DATA ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');
}

// ==================== 6. ÙØ­Øµ LocalStorage ====================
console.log('\n%cğŸ’¿ ÙØ­Øµ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ', 'color: #6366f1; font-size: 18px; font-weight: bold;');
console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€');

try {
    const mainData = localStorage.getItem('accounting_pro_eg_v5');
    const userData = localStorage.getItem('accounting_pro_current_user_v5');
    
    if (mainData) {
        const size = (mainData.length / 1024).toFixed(2);
        console.log('  âœ… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©:', size + ' KB');
    } else {
        console.warn('  âš ï¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©');
    }
    
    if (userData) {
        const size = (userData.length / 1024).toFixed(2);
        console.log('  âœ… Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:', size + ' KB');
    } else {
        console.warn('  âš ï¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©');
    }
    
    const totalSize = ((mainData?.length || 0) + (userData?.length || 0)) / 1024;
    console.log('  ğŸ“¦ Ø§Ù„Ø­Ø¬Ù… Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:', totalSize.toFixed(2) + ' KB');
} catch (e) {
    console.error('  âŒ Ø®Ø·Ø£ ÙÙŠ LocalStorage:', e.message);
}

// ==================== 7. ÙØ­Øµ Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ© ====================
console.log('\n%cğŸ“š ÙØ­Øµ Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©', 'color: #f97316; font-size: 18px; font-weight: bold;');
console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€');

const libraries = [
    { name: 'Chart.js', check: () => typeof Chart !== 'undefined' },
    { name: 'XLSX', check: () => typeof XLSX !== 'undefined' },
    { name: 'Tailwind CSS', check: () => !!document.querySelector('script[src*="tailwindcss"]') },
    { name: 'DaisyUI', check: () => !!document.querySelector('link[href*="daisyui"]') },
    { name: 'Bootstrap Icons', check: () => !!document.querySelector('link[href*="bootstrap-icons"]') }
];

libraries.forEach(lib => {
    if (lib.check()) {
        console.log(`  âœ… ${lib.name}`);
    } else {
        console.warn(`  âš ï¸ ${lib.name} - ØºÙŠØ± Ù…Ø­Ù…Ù„Ø©`);
    }
});

// ==================== 8. Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ ====================
console.log('\n%cğŸ“‹ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ', 'color: #3b82f6; font-size: 20px; font-weight: bold;');
console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');

const successRate = ((loaded / modules.length) * 100).toFixed(1);
let status = 'âœ… Ù…Ù…ØªØ§Ø²';
let statusColor = '#10b981';

if (errors > 0) {
    status = 'âŒ ÙŠÙˆØ¬Ø¯ Ø£Ø®Ø·Ø§Ø¡ Ø­Ø±Ø¬Ø©';
    statusColor = '#ef4444';
} else if (warnings > 3) {
    status = 'âš ï¸ ÙŠÙˆØ¬Ø¯ ØªØ­Ø°ÙŠØ±Ø§Øª';
    statusColor = '#f59e0b';
}

console.log(`%c${status}`, `color: ${statusColor}; font-size: 18px; font-weight: bold;`);
console.log('\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”');
console.log(`â”‚  ğŸ“Š Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ø¬Ø§Ø­: ${successRate}%`);
console.log(`â”‚  ğŸ“¦ Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ù…Ø­Ù…Ù„Ø©: ${loaded}/${modules.length}`);
console.log(`â”‚  ğŸ”´ Ø£Ø®Ø·Ø§Ø¡ Ø­Ø±Ø¬Ø©: ${errors}`);
console.log(`â”‚  ğŸŸ¡ ØªØ­Ø°ÙŠØ±Ø§Øª: ${warnings}`);
console.log('â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜');

if (errors === 0 && warnings === 0) {
    console.log('\n%cğŸ‰ Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ù…Ø«Ø§Ù„ÙŠ! ğŸ‡ªğŸ‡¬', 'color: #10b981; font-size: 20px; font-weight: bold; text-shadow: 2px 2px 4px rgba(0,0,0,0.2);');
} else if (errors > 0) {
    console.log('\n%cğŸ”§ ÙŠØ¬Ø¨ Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø­Ø±Ø¬Ø©', 'color: #ef4444; font-size: 16px; font-weight: bold;');
} else {
    console.log('\n%câœ… Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ¹Ù…Ù„ - ÙŠÙˆØ¬Ø¯ ØªØ­Ø°ÙŠØ±Ø§Øª Ø¨Ø³ÙŠØ·Ø©', 'color: #f59e0b; font-size: 16px; font-weight: bold;');
}

console.log('\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
console.log('%cğŸ’¡ Ù†ØµÙŠØ­Ø©: Ø§Ø­ÙØ¸ Ù‡Ø°Ø§ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ù„Ù„Ø±Ø¬ÙˆØ¹ Ø¥Ù„ÙŠÙ‡', 'color: #6366f1; font-size: 14px;');
console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n');

// ==================== ØªØµØ¯ÙŠØ± Ø§Ù„ØªÙ‚Ø±ÙŠØ± ====================
const fullReport = {
    timestamp: new Date().toISOString(),
    timestampEgypt: new Date().toLocaleString('ar-EG', { timeZone: 'Africa/Cairo' }),
    user: 'ahmedrashadmoahmed-lang',
    system: 'Ù†Ø¸Ø§Ù… Ù…Ø­Ø§Ø³Ø¨ÙŠ Ø¨Ø±Ùˆ - Ù…ØµØ± v5.0',
    modules: modules.map(m => ({ 
        name: m.name, 
        loaded: typeof window[m.name] !== 'undefined', 
        critical: m.critical 
    })),
    stats: {
        total: modules.length,
        loaded: loaded,
        errors: errors,
        warnings: warnings,
        successRate: successRate + '%'
    },
    data: typeof APP_CORE !== 'undefined' ? {
        customers: APP_CORE.getData('customers')?.length || 0,
        quotations: APP_CORE.getData('quotations')?.length || 0,
        invoices: APP_CORE.getData('invoices')?.length || 0
    } : null,
    user: typeof APP_CORE !== 'undefined' ? APP_CORE.appState?.currentUser : null,
    settings: typeof APP_SETTINGS !== 'undefined' ? APP_SETTINGS.getSettings() : null
};

console.log('%cğŸ“¥ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙƒØ§Ù…Ù„ØŒ Ø§ÙƒØªØ¨:', 'color: #3b82f6; font-weight: bold;');
console.log('   copy(fullReport)');
console.log('%cØ«Ù… Ø§Ù„ØµÙ‚Ù‡ ÙÙŠ Ù…Ù„Ù Ù†ØµÙŠ', 'color: #6b7280;');

// Ø¥ØªØ§Ø­Ø© Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ù„Ù„Ù†Ø³Ø®
window.fullReport = fullReport;