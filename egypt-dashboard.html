<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ‡ªğŸ‡¬ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - Ù†Ø¸Ø§Ù… Ù…Ø­Ø§Ø³Ø¨ÙŠ Ù…ØµØ±ÙŠ Ù…ØªÙƒØ§Ù…Ù„</title>
    
    <!-- TailwindCSS & DaisyUI -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet">
    
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    
    <!-- XLSX -->
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
    </style>
</head>
<body class="rtl bg-gray-50 dark:bg-gray-900">

    <!-- Navigation -->
    <nav class="navbar bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-xl sticky top-0 z-50">
        <div class="container mx-auto px-4">
            <div class="flex-1">
                <a href="egypt-dashboard.html" class="btn btn-ghost normal-case text-xl">
                    <i class="bi bi-calculator"></i>
                    <span class="mr-2">Ù†Ø¸Ø§Ù… Ù…Ø­Ø§Ø³Ø¨ÙŠ Ù…ØµØ±ÙŠ ğŸ‡ªğŸ‡¬</span>
                </a>
            </div>
            <div class="flex-none">
                <ul class="menu menu-horizontal px-1">
                    <li><a href="egypt-dashboard.html" class="active"><i class="bi bi-speedometer2"></i> Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a></li>
                    <li><a href="egypt-sales.html"><i class="bi bi-cart-check"></i> Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</a></li>
                    <li><a href="egypt-purchases.html"><i class="bi bi-bag"></i> Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</a></li>
                    <li><a href="egypt-expenses.html"><i class="bi bi-cash-coin"></i> Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</a></li>
                    <li><a href="egypt-reports.html"><i class="bi bi-file-earmark-text"></i> Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</a></li>
                </ul>
                <button class="btn btn-sm btn-ghost" onclick="APP_EGYPT_IMPORT.showImportDialog()">
                    <i class="bi bi-download"></i>
                    Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…Ù† Google Sheets
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <div id="dashboard-content">
            <!-- Loading Spinner -->
            <div class="flex justify-center items-center h-96">
                <span class="loading loading-spinner loading-lg text-primary"></span>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer footer-center p-10 bg-base-200 text-base-content mt-12">
        <div>
            <div class="grid grid-flow-col gap-4">
                <i class="bi bi-facebook text-2xl"></i>
                <i class="bi bi-twitter text-2xl"></i>
                <i class="bi bi-youtube text-2xl"></i>
            </div>
            <div>
                <p class="font-bold text-lg">Ù†Ø¸Ø§Ù… Ù…Ø­Ø§Ø³Ø¨ÙŠ Ù…ØµØ±ÙŠ Ù…ØªÙƒØ§Ù…Ù„ - CRM6 ğŸ‡ªğŸ‡¬</p>
                <p>Ù†Ø¸Ø§Ù… Ù…Ø­Ø§Ø³Ø¨ÙŠ Ø´Ø§Ù…Ù„ Ù„Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„Ù…ØµØ±ÙŠØ©</p>
            </div>
            <div>
                <p>Â© 2025 - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
                <p class="text-sm text-gray-500">Ø§Ù„Ù…Ø·ÙˆØ±: Ahmed Rashad (@ahmedrashadmoahmed-lang)</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript Files -->
    <script src="js/app-egypt-core.js"></script>
    <script src="js/app-egypt-tax.js"></script>
    <script src="js/app-egypt-sales.js"></script>
    <script src="js/app-egypt-purchases.js"></script>
    <script src="js/app-egypt-customers.js"></script>
    <script src="js/app-egypt-suppliers.js"></script>
    <script src="js/app-egypt-expenses.js"></script>
    <script src="js/app-egypt-guarantees.js"></script>
    <script src="js/app-egypt-cashbox.js"></script>
    <script src="js/app-egypt-payroll.js"></script>
    <script src="js/app-egypt-reports.js"></script>
    <script src="js/app-egypt-dashboard.js"></script>
    <script src="js/app-egypt-import.js"></script>

    <script>
    (function() {
        'use strict';
        
        console.log('%cğŸ‡ªğŸ‡¬ Ù†Ø¸Ø§Ù… Ù…Ø­Ø§Ø³Ø¨ÙŠ Ù…ØµØ±ÙŠ Ù…ØªÙƒØ§Ù…Ù„ - CRM6', 'color: #3b82f6; font-size: 24px; font-weight: bold;');
        console.log('%cØ§Ù„Ù†Ø³Ø®Ø© 6.0.0', 'color: #10b981; font-size: 16px;');
        console.log('â°', new Date().toLocaleString('ar-EG', { timeZone: 'Africa/Cairo' }));
        
        // Wait for DOM to be ready
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ“¦ DOM Ø¬Ø§Ù‡Ø²');
            
            try {
                // Initialize all modules
                console.log('ğŸš€ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù…...');
                APP_EGYPT_DASHBOARD.initialize();
                
                // Render dashboard
                console.log('ğŸ“Š Ø¹Ø±Ø¶ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…...');
                APP_EGYPT_DASHBOARD.renderDashboard('dashboard-content');
                
                console.log('%câœ… Ø§Ù„Ù†Ø¸Ø§Ù… Ø¬Ø§Ù‡Ø²! ğŸ‰', 'color: #10b981; font-size: 18px; font-weight: bold;');
                
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù…:', error);
                document.getElementById('dashboard-content').innerHTML = `
                    <div class="alert alert-error shadow-lg">
                        <div>
                            <i class="bi bi-exclamation-triangle text-2xl"></i>
                            <div>
                                <h3 class="font-bold">Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…</h3>
                                <div class="text-xs">${error.message}</div>
                            </div>
                        </div>
                    </div>
                `;
            }
        });
        
        // Handle window resize for charts
        let resizeTimer;
        window.addEventListener('resize', function() {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(function() {
                if (APP_EGYPT_DASHBOARD) {
                    APP_EGYPT_DASHBOARD.renderSalesPurchasesChart();
                    APP_EGYPT_DASHBOARD.renderExpensesChart();
                }
            }, 250);
        });
        
    })();
    </script>

</body>
</html>
